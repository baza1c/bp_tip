#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	ОтборПоВладельцу = Ложь;
	Если Параметры.Отбор.Свойство("Владелец") Тогда
		Если ЗначениеЗаполнено(Параметры.Отбор.Владелец) Тогда
			ОтборПоВладельцу = Истина;
			Владелец         = Параметры.Отбор.Владелец;
			Услуга           = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(Владелец, "Услуга");
		КонецЕсли;
	КонецЕсли;
	
КонецПроцедуры

&НаКлиенте
Процедура ПриОткрытии(Отказ)
	
	Сообщение = "";
	ПоказатьПредупреждение = Ложь;
	Если ОтборПоВладельцу Тогда
		Если Услуга Тогда
			ШаблонСообщения = НСтр("ru='Для номенклатуры %1 не применяются назначения использования!'");
			Сообщение = СтроковыеФункцииКлиентСервер.ПодставитьПараметрыВСтроку(ШаблонСообщения, Владелец);
			ПоказатьПредупреждение = Истина;
		КонецЕсли;
	Иначе
		Сообщение = НСтр("ru='Не выбрана номенклатура или не записан редактируемый элемент номенклатуры!'");
		ПоказатьПредупреждение = Истина;
	КонецЕсли;
	
	Если ПоказатьПредупреждение Тогда
		ПоказатьПредупреждение( , Сообщение);
		Отказ = Истина;
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти
